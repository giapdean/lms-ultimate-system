<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LMS Ultimate - H·ªá Th·ªëng ƒê√†o T·∫°o T·ª± ƒê·ªông</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* --- CORE VARIABLES (Premium Dark Mode) --- */
        :root {
            --bg-dark: #050507;
            --card-bg: #121216;
            --border: #1F1F23;
            --text-main: #FFFFFF;
            --text-sub: #A1A1AA;
            --accent: #DC2626;
            /* Red-600 */
            --accent-glow: rgba(220, 38, 38, 0.25);
            --success: #22c55e;
        }

        * {
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            line-height: 1.6;
        }

        /* --- UTILITIES --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .text-gradient {
            background: linear-gradient(90deg, #fff, #999);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .text-accent {
            color: var(--accent);
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
        }

        .section-sub {
            text-align: center;
            color: var(--text-sub);
            max-width: 600px;
            margin: 0 auto 48px auto;
            font-size: 1.1rem;
        }

        /* --- COMPONENTS --- */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            border: 1px solid var(--accent);
            box-shadow: 0 4px 20px var(--accent-glow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px var(--accent-glow);
            filter: brightness(1.1);
        }

        .btn-glass {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .btn-glass:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }

        /* --- HEADER --- */
        header {
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
            background: rgba(5, 5, 7, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
        }

        .nav-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-weight: 700;
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo span {
            color: var(--accent);
        }

        /* --- HERO --- */
        .hero {
            padding: 160px 0 100px 0;
            text-align: center;
            background: radial-gradient(circle at 50% 0%, rgba(220, 38, 38, 0.15), transparent 70%);
        }

        .hero h1 {
            font-size: 4rem;
            line-height: 1.1;
            font-weight: 800;
            margin-bottom: 24px;
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-sub);
            max-width: 700px;
            margin: 0 auto 40px auto;
        }

        /* --- TABS & GENERIC GRID --- */
        .tabs-nav {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-sub);
            padding: 10px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            border-color: var(--text-main);
            color: var(--text-main);
        }

        .tab-btn.active {
            background: var(--text-main);
            color: var(--bg-dark);
            border-color: var(--text-main);
            font-weight: 600;
        }

        .tab-content {
            display: none;
            /* Hidden by default */
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: grid;
            /* Shown when active */
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* --- GALLERY CARD --- */
        .gallery-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .gallery-card:hover {
            transform: translateY(-5px);
            border-color: var(--text-sub);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .gallery-img-wrapper {
            width: 100%;
            aspect-ratio: 16/9;
            overflow: hidden;
            position: relative;
        }

        .gallery-img-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-card:hover img {
            transform: scale(1.05);
        }

        .gallery-info {
            padding: 20px;
        }

        .gallery-title {
            margin: 0 0 8px 0;
            font-size: 1.1rem;
            color: var(--text-main);
        }

        .gallery-desc {
            margin: 0;
            font-size: 0.9rem;
            color: var(--text-sub);
            line-height: 1.5;
        }


        /* --- PRICING --- */
        .pricing-section {
            padding: 100px 0;
            background: linear-gradient(180deg, transparent, rgba(5, 5, 7, 0.5), transparent);
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 32px;
            max-width: 900px;
            margin: 0 auto;
        }

        .pricing-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 32px;
            position: relative;
        }

        .pricing-card.featured {
            border-color: var(--accent);
            box-shadow: 0 0 30px rgba(220, 38, 38, 0.1);
        }

        .price-tag {
            font-size: 3rem;
            font-weight: 800;
            color: white;
            margin: 16px 0 8px 0;
        }

        .badge {
            background: var(--accent-glow);
            color: var(--accent);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            border: 1px solid rgba(220, 38, 38, 0.3);
        }

        .check-list {
            list-style: none;
            padding: 0;
            margin: 24px 0;
            text-align: left;
        }

        .check-list li {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            color: var(--text-sub);
        }

        /* --- FOOTER --- */
        footer {
            border-top: 1px solid var(--border);
            padding: 60px 0;
            text-align: center;
            color: var(--text-sub);
            margin-top: 60px;
        }

        /* --- PAYMENT MODAL --- */
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #121216;
            margin: auto;
            padding: 30px;
            border: 1px solid #333;
            border-radius: 16px;
            width: 90%;
            max-width: 450px;
            position: relative;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }

        .close:hover,
        .close:focus {
            color: white;
            text-decoration: none;
            cursor: pointer;
        }

        .spin {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
        }

        /* --- NEW PREMIUM EFFECTS --- */

        /* 1. Animated Gradient Border */
        .animated-border {
            position: relative;
            background: var(--card-bg);
            border-radius: 16px;
            z-index: 1;
            overflow: hidden;
        }

        .animated-border::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(transparent, transparent, transparent, var(--accent));
            animation: rotate 4s linear infinite;
            z-index: -1;
        }

        .animated-border::after {
            content: "";
            position: absolute;
            inset: 1px;
            /* Border thickness */
            background: var(--card-bg);
            border-radius: 16px;
            z-index: -1;
        }

        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* 2. Scroll Reveal */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }

        .scroll-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* 3. FAQ Accordion */
        .faq-item {
            border-bottom: 1px solid var(--border);
            margin-bottom: 16px;
        }

        .faq-question {
            width: 100%;
            text-align: left;
            background: none;
            border: none;
            color: var(--text-main);
            font-size: 1.1rem;
            font-weight: 600;
            padding: 16px 0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            color: var(--text-sub);
            padding-bottom: 0;
        }

        .faq-item.active .faq-answer {
            padding-bottom: 16px;
            max-height: 200px;
        }

        /* 4. Countdown Timer */
        .countdown-container {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin: 24px 0;
        }

        .countdown-box {
            background: rgba(220, 38, 38, 0.1);
            border: 1px solid rgba(220, 38, 38, 0.3);
            padding: 12px;
            border-radius: 8px;
            min-width: 70px;
            text-align: center;
        }

        .countdown-number {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--accent);
            display: block;
        }

        .countdown-label {
            font-size: 0.8rem;
            color: var(--text-sub);
            text-transform: uppercase;
        }

        /* ADDED LIGHTBOX CSS HERE TO ENSURE IT WORKS WITHOUT RELYING ON EXTERNAL FILE UPDATE */
        .lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .lightbox.active {
            opacity: 1;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .lightbox.active .lightbox-content {
            transform: scale(1);
        }

        .lightbox-img {
            max-width: 100%;
            max-height: 90vh;
            border-radius: 8px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
            display: block;
        }

        .close-btn {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 30px;
            cursor: pointer;
            opacity: 0.8;
            transition: all 0.2s;
        }

        .close-btn:hover {
            opacity: 1;
            transform: scale(1.1);
        }

        .gallery-desc {
            color: var(--text-sub);
            font-size: 13px;
            text-align: center;
            margin-top: 8px;
            padding: 0 16px;
            line-height: 1.5;
        }

        .gallery-card {
            cursor: pointer;
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header>
        <div class="container nav-wrapper">
            <div class="logo">
                <i data-lucide="zap" style="color:var(--accent)"></i>
                <span>LMS Ultimate</span>
            </div>
            <a href="#pricing" class="btn btn-primary">Mua ngay</a>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero scroll-reveal">
        <div class="container">
            <div class="badge" style="display:inline-block; margin-bottom:24px">New Update v2.3</div>
            <h1>S·ªü H·ªØu H·ªá Th·ªëng LMS <br><span class="text-gradient">T·ª± ƒê·ªông H√≥a Ho√†n Ch·ªânh</span></h1>
            <p>Bi·∫øn Google Sheet th√†nh h·ªá th·ªëng qu·∫£n l√Ω h·ªçc vi√™n chuy√™n nghi·ªáp. Email Marketing t·ª± ƒë·ªông, ph√¢n quy·ªÅn kh√≥a
                h·ªçc v√† b·∫£o m·∫≠t video - Kh√¥ng t·ªën ph√≠ duy tr√¨ server.</p>
            <div style="display:flex; gap:16px; justify-content:center">
                <a href="#pricing" class="btn btn-primary">SƒÉn ∆Øu ƒê√£i T·∫øt <i data-lucide="arrow-right"
                        style="width:18px"></i></a>
                <a href="#video-demo" class="btn btn-glass">Xem Demo</a>
            </div>

            <!-- Dashboard Image -->
            <!-- Dashboard Video -->
            <div id="video-demo"
                style="margin-top:60px; border:1px solid var(--border); border-radius:12px; overflow:hidden; box-shadow:0 0 100px rgba(220,38,38,0.1); position: relative; padding-bottom: 56.25%; height: 0; background: #000;">
                <iframe src="https://drive.google.com/file/d/1CKc3Zdsl0rIC13S9KJuDJM62FwtQHOmZ/preview"
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;"
                    allow="autoplay; fullscreen">
                </iframe>
            </div>
        </div>
    </section>

    <!-- NEW: Pain Point Section -->
    <section class="container scroll-reveal" style="padding: 80px 24px;">
        <h2 class="section-title">B·∫°n ƒêang G·∫∑p V·∫•n ƒê·ªÅ?</h2>
        <p class="section-sub">Qu·∫£n l√Ω th·ªß c√¥ng khi·∫øn b·∫°n ki·ªát s·ª©c v√† m·∫•t doanh thu?</p>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-top: 40px;">
            <div class="premium-card">
                <i data-lucide="frown" style="color: var(--accent); margin-bottom: 16px;"></i>
                <h3>Duy·ªát Tay Th·ªß C√¥ng</h3>
                <p style="color: var(--text-sub)">M·∫•t c·∫£ ng√†y ƒë·ªÉ add t·ª´ng h·ªçc vi√™n v√†o Drive, g·ª≠i email th·ªß c√¥ng d·ªÖ sai
                    s√≥t.</p>
            </div>
            <div class="premium-card">
                <i data-lucide="lock-open" style="color: var(--accent); margin-bottom: 16px;"></i>
                <h3>Video B·ªã Leak</h3>
                <p style="color: var(--text-sub)">Up l√™n Drive b·ªã h·ªçc vi√™n t·∫£i v·ªÅ share mi·ªÖn ph√≠ ho·∫∑c b√°n l·∫°i gi√° r·∫ª.
                </p>
            </div>
            <div class="premium-card">
                <i data-lucide="file-x" style="color: var(--accent); margin-bottom: 16px;"></i>
                <h3>D·ªØ Li·ªáu L·ªôn X·ªôn</h3>
                <p style="color: var(--text-sub)">Kh√¥ng bi·∫øt ai ƒë√£ h·ªçc, ai s·∫Øp h·∫øt h·∫°n. Doanh thu t·∫£n m·∫°n kh√≥ ki·ªÉm so√°t.
                </p>
            </div>
        </div>
    </section>

    <!-- NEW: Solution Section -->
    <section class="container scroll-reveal" style="padding: 60px 24px 100px 24px;">
        <h2 class="section-title">Gi·∫£i Ph√°p <span class="text-gradient">All-in-One</span></h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center; margin-top: 40px;">
            <div>
                <ul class="check-list">
                    <li><i data-lucide="check-circle" style="color: var(--success)"></i> <strong>T·ª± ƒë·ªông 100%:</strong>
                        Kh√°ch chuy·ªÉn kho·∫£n -> H·ªá th·ªëng t·ª± c·∫•p quy·ªÅn & G·ª≠i Mail.</li>
                    <li><i data-lucide="check-circle" style="color: var(--success)"></i> <strong>B·∫£o M·∫≠t ƒêa
                            T·∫ßng:</strong> Video Private, Watermark Email, Ch·∫∑n quay m√†n h√¨nh.</li>
                    <li><i data-lucide="check-circle" style="color: var(--success)"></i> <strong>Ti·∫øt Ki·ªám Chi
                            Ph√≠:</strong> Ch·ªâ d√πng Google Sheet & Drive. Kh√¥ng t·ªën ti·ªÅn Server/Vimeo h√†ng th√°ng.</li>
                </ul>
            </div>
            <div class="premium-card" style="border-color: var(--accent);">
                <h3 style="margin-top:0">T·∫°i sao ch·ªçn LMS Ultimate?</h3>
                <p style="color: var(--text-sub)">Ch√∫ng t√¥i kh√¥ng ch·ªâ b√°n Source Code. Ch√∫ng t√¥i cung c·∫•p m·ªôt Quy tr√¨nh
                    Kinh doanh T·ª± ƒë·ªông h√≥a ƒë√£ ƒë∆∞·ª£c ki·ªÉm ch·ª©ng.</p>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="container" style="padding-top:80px; padding-bottom:100px">
        <h2 class="section-title">Kh√°m Ph√° <span class="text-accent">H·ªá Th·ªëng LMS</span></h2>
        <p class="section-sub">Tr·∫£i nghi·ªám th·ª±c t·∫ø qua h√¨nh ·∫£nh giao di·ªán h·ªá th·ªëng. B·∫•m v√†o ·∫£nh ƒë·ªÉ xem chi ti·∫øt.</p>

        <!-- Tabs Navigation -->
        <div class="tabs-nav">
            <button class="tab-btn active" onclick="openTab(event, 'student')">H·ªçc Vi√™n</button>
            <button class="tab-btn" onclick="openTab(event, 'admin')">Qu·∫£n L√Ω & Admin</button>
            <button class="tab-btn" onclick="openTab(event, 'report')">B√°o C√°o</button>
            <button class="tab-btn" onclick="openTab(event, 'marketing')">Marketing</button>
        </div>

        <!-- Tab 1: Student -->
        <div id="student" class="tab-content active">
            <div class="gallery-card"
                onclick="openLightbox('assets/student/student-homepage.png', 'Homepage H·ªçc Vi√™n')">
                <div class="gallery-img-wrapper">
                    <img src="assets/student/student-homepage.png" alt="Homepage H·ªçc Vi√™n">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">Homepage H·ªçc Vi√™n</h4>
                    <p class="gallery-desc">Dashboard c√° nh√¢n h√≥a. Hi·ªÉn th·ªã % ti·∫øn ƒë·ªô kh√≥a h·ªçc, b√†i h·ªçc ƒëang xem d·ªü v√†
                        danh s√°ch kh√≥a h·ªçc s·ªü h·ªØu.</p>
                </div>
            </div>
            <div class="gallery-card" onclick="openLightbox('assets/student/lesson-view.png', 'Giao di·ªán H·ªçc T·∫≠p')">
                <div class="gallery-img-wrapper">
                    <img src="assets/student/lesson-view.png" alt="Giao di·ªán H·ªçc">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">Giao di·ªán H·ªçc T·∫≠p & Video</h4>
                    <p class="gallery-desc">Tr√¨nh ph√°t Video Private ƒë·ªôc quy·ªÅn. Ch·ªëng download, Watermark email ƒë·ªông
                        ch·∫∑n quay m√†n h√¨nh.</p>
                </div>
            </div>
        </div>

        <!-- Tab 2: Admin -->
        <div id="admin" class="tab-content">
            <div class="gallery-card"
                onclick="openLightbox('assets/admin/dashboard-overview.png', 'Dashboard Overview')">
                <div class="gallery-img-wrapper">
                    <img src="assets/admin/dashboard-overview.png" alt="Dashboard Overview">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">Dashboard T·ªïng Quan</h4>
                    <p class="gallery-desc">Bi·ªÉu ƒë·ªì tr·ª±c quan theo d√µi Doanh thu, H·ªçc vi√™n m·ªõi v√† Hi·ªáu qu·∫£ Email
                        Marketing real-time.</p>
                </div>
            </div>
            <div class="gallery-card" onclick="openLightbox('assets/admin/course-management.png', 'Course Management')">
                <div class="gallery-img-wrapper">
                    <img src="assets/admin/course-management.png" alt="Course Management">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">Qu·∫£n L√Ω Kh√≥a H·ªçc</h4>
                    <p class="gallery-desc">Qu·∫£n l√Ω kho n·ªôi dung. T√πy ch·ªânh tr·∫°ng th√°i, s·∫Øp x·∫øp th·ª© t·ª± v√† c·∫≠p nh·∫≠t th√¥ng
                        tin nhanh ch√≥ng.</p>
                </div>
            </div>
            <div class="gallery-card" onclick="openLightbox('assets/admin/add-course.png', 'Add Course')">
                <div class="gallery-img-wrapper">
                    <img src="assets/admin/add-course.png" alt="Add Course">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">Th√™m Kh√≥a H·ªçc Nhanh</h4>
                    <p class="gallery-desc">Form nh·∫≠p li·ªáu th√¥ng minh. T·ª± ƒë·ªông ƒë·ªìng b·ªô video t·ª´ Drive, upload thumbnail
                        kh√¥ng c·∫ßn code.</p>
                </div>
            </div>
            <div class="gallery-card"
                onclick="openLightbox('assets/admin/student-management.png', 'Student Management')">
                <div class="gallery-img-wrapper">
                    <img src="assets/admin/student-management.png" alt="Student Management">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">Qu·∫£n L√Ω H·ªçc Vi√™n</h4>
                    <p class="gallery-desc">Ki·ªÉm so√°t truy c·∫≠p ch·∫∑t ch·∫Ω. Theo d√µi h·∫°n s·ª≠ d·ª•ng, l·ªãch s·ª≠ login v√† c·∫•p
                        quy·ªÅn t·ª± ƒë·ªông.</p>
                </div>
            </div>
        </div>

        <!-- Tab 3: Report -->
        <div id="report" class="tab-content">
            <div class="gallery-card" onclick="openLightbox('assets/admin/student-report.png', 'Student Report')">
                <div class="gallery-img-wrapper">
                    <img src="assets/admin/student-report.png" alt="Student Report">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">B√°o C√°o H·ªçc Vi√™n</h4>
                    <p class="gallery-desc">H·ªì s∆° chi ti·∫øt t·ª´ng ng∆∞·ªùi. Xem ch√≠nh x√°c ti·∫øn ƒë·ªô h·ªçc, login t·ª´ IP n√†o ƒë·ªÉ
                        ph√°t hi·ªán gian l·∫≠n.</p>
                </div>
            </div>
            <div class="gallery-card" onclick="openLightbox('assets/admin/course-report.png', 'Course Report')">
                <div class="gallery-img-wrapper">
                    <img src="assets/admin/course-report.png" alt="Course Report">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">B√°o C√°o Kh√≥a H·ªçc</h4>
                    <p class="gallery-desc">Ph√¢n t√≠ch h√†nh vi h·ªçc t·∫≠p. B√†i n√†o h·ªçc vi√™n hay b·ªè d·ªü? Th·ªùi l∆∞·ª£ng xem trung
                        b√¨nh l√† bao nhi√™u?</p>
                </div>
            </div>
            <div class="gallery-card" onclick="openLightbox('assets/admin/lesson-report.png', 'Lesson Report')">
                <div class="gallery-img-wrapper">
                    <img src="assets/admin/lesson-report.png" alt="Lesson Report">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">B√°o C√°o B√†i H·ªçc</h4>
                    <p class="gallery-desc">Th·ªëng k√™ chi ti·∫øt l∆∞·ª£t xem, b√¨nh lu·∫≠n v√† ƒë√°nh gi√° ch·∫•t l∆∞·ª£ng b√†i h·ªçc.</p>
                </div>
            </div>
        </div>

        <!-- Tab 4: Marketing -->
        <div id="marketing" class="tab-content">
            <div class="gallery-card" onclick="openLightbox('assets/admin/email-marketing.png', 'Email Marketing')">
                <div class="gallery-img-wrapper">
                    <img src="assets/admin/email-marketing.png" alt="Email Marketing">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">Chi·∫øn D·ªãch Email Marketing</h4>
                    <p class="gallery-desc">G·ª≠i email t·ª± ƒë·ªông khi ƒëƒÉng k√Ω, mua h√†ng ho·∫∑c nh·∫Øc nh·ªü h·ªçc t·∫≠p. Upsell theo
                        k·ªãch b·∫£n c√≥ s·∫µn.</p>
                </div>
            </div>
            <div class="gallery-card" onclick="openLightbox('assets/admin/email-report.png', 'Email Report')">
                <div class="gallery-img-wrapper">
                    <img src="assets/admin/email-report.png" alt="Email Report">
                </div>
                <div class="gallery-info">
                    <h4 class="gallery-title">B√°o C√°o Email</h4>
                    <p class="gallery-desc">Tracking minh b·∫°ch. ƒêo l∆∞·ªùng t·ª∑ l·ªá m·ªü (Open Rate), t·ª∑ l·ªá Click ngay tr√™n
                        Google Sheet.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="container scroll-reveal" style="padding-bottom:120px">
        <h2 class="section-title">B·∫£ng Gi√° <span class="text-accent">∆Øu ƒê√£i T·∫øt</span></h2>
        <p class="section-sub">S·ªü h·ªØu tr·ªçn b·ªô m√£ ngu·ªìn h·ªá th·ªëng. Thanh to√°n m·ªôt l·∫ßn - D√πng vƒ©nh vi·ªÖn.</p>

        <!-- COUNTDOWN TIMER -->
        <div class="countdown-container">
            <div class="countdown-box">
                <span id="days" class="countdown-number">00</span>
                <span class="countdown-label">Ng√†y</span>
            </div>
            <div class="countdown-box">
                <span id="hours" class="countdown-number">00</span>
                <span class="countdown-label">Gi·ªù</span>
            </div>
            <div class="countdown-box">
                <span id="minutes" class="countdown-number">00</span>
                <span class="countdown-label">Ph√∫t</span>
            </div>
            <div class="countdown-box">
                <span id="seconds" class="countdown-number">00</span>
                <span class="countdown-label">Gi√¢y</span>
            </div>
        </div>

        <div class="pricing-grid">
            <!-- Basic Plan -->
            <div class="pricing-card">
                <h3>G√≥i Source Code</h3>
                <div class="price-tag">2.150K</div>
                <p style="color:var(--text-sub);font-size:13px; margin-bottom:24px">D√†nh cho Developer ho·∫∑c ng∆∞·ªùi ƒë√£
                    bi·∫øt Google Apps Script.</p>
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-primary"
                        style="width:100%; background: linear-gradient(90deg, #F59E0B, #D97706);"
                        onclick="openGameModal()">
                        <i data-lucide="gift" style="width: 16px; margin-right: 5px;"></i> SƒÉn Code Gi·∫£m 76.7%
                    </button>
                </div>
                <a href="#" class="btn btn-glass" style="width:100%" onclick="openPaymentModal('basic')">Mua Ngay (Gi√°
                    G·ªëc)</a>
                <ul class="check-list">
                    <li><i data-lucide="check"></i> Full Source Code (Frontend + Backend "m√£ h√≥a")</li>
                    <li><i data-lucide="check"></i> T√†i li·ªáu h∆∞·ªõng d·∫´n c√†i ƒë·∫∑t file Word</li>
                    <li><i data-lucide="check"></i> ƒê∆∞·ª£c tham gia nh√≥m Zalo h·ªó tr·ª£ chung</li>
                    <li><i data-lucide="check"></i> Ch·ªâ update t√≠nh nƒÉng trong 2 version ti·∫øp theo</li>
                    <li style="opacity:0.5"><i data-lucide="x"></i> Kh√¥ng bao g·ªìm Setup 1-1</li>
                    <li style="opacity:0.5"><i data-lucide="x"></i> Kh√¥ng h·ªó tr·ª£ custom t√≠nh nƒÉng</li>
                </ul>
            </div>

            <!-- VIP Plan -->
            <div class="pricing-card featured animated-border">
                <div
                    style="position:absolute; top:0; left:0; width:100%; text-align:center; background:rgba(220,38,38,0.2); color:#fca5a5; font-size:12px; font-weight:bold; padding:8px 0;">
                    B√ÅN CH·∫†Y NH·∫§T</div>
                <h3>Full Combo VIP</h3>
                <div class="price-tag text-accent">3.000K</div>
                <p style="color:var(--text-sub);font-size:13px; margin-bottom:24px">Gi·∫£i ph√°p tr·ªçn g√≥i + H·ªó tr·ª£ t·∫≠n
                    rƒÉng.</p>
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-primary"
                        style="width:100%; background: linear-gradient(90deg, #F59E0B, #D97706);"
                        onclick="openGameModal()">
                        <i data-lucide="gift" style="width: 16px; margin-right: 5px;"></i> SƒÉn Code Gi·∫£m 76.7%
                    </button>
                </div>
                <a href="#" class="btn btn-glass" style="width:100%; border-color: var(--accent); color: var(--accent);"
                    onclick="openPaymentModal('vip')">Mua Ngay (Gi√° G·ªëc)</a>
                <ul class="check-list">
                    <li><i data-lucide="check" style="color:var(--accent)"></i> <strong>M·ªçi quy·ªÅn l·ª£i g√≥i Basic</strong>
                    </li>
                    <li><i data-lucide="check" style="color:var(--accent)"></i> <strong>Support 1-1 Ultraviewer</strong>
                        c√†i ƒë·∫∑t ƒë·∫øn khi ch·∫°y ƒë∆∞·ª£c</li>
                    <li><i data-lucide="check" style="color:var(--accent)"></i> T·∫∑ng kh√≥a h·ªçc X√¢y D·ª±ng Webapp/
                        Landingpage ƒë∆°n gi·∫£n v√† hi·ªáu qu·∫£ v·ªõi Google App Script - tr·ªã gi√° 3.000.000ƒë</li>
                    <li><i data-lucide="check" style="color:var(--accent)"></i> Update mi·ªÖn ph√≠ tr·ªçn ƒë·ªùi (Life-time)
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <!-- NEW: FAQ Section -->
    <section class="container scroll-reveal" style="padding-bottom: 100px; max-width: 800px;">
        <h2 class="section-title">C√¢u H·ªèi Th∆∞·ªùng G·∫∑p</h2>

        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                T√¥i kh√¥ng bi·∫øt code c√≥ d√πng ƒë∆∞·ª£c kh√¥ng?
                <i data-lucide="chevron-down"></i>
            </button>
            <div class="faq-answer">
                <p>ƒê∆∞·ª£c! H·ªá th·ªëng ƒëi k√®m Video h∆∞·ªõng d·∫´n chi ti·∫øt t·ª´ng b∆∞·ªõc. ƒê·∫∑c bi·ªát g√≥i VIP c√≥ k·ªπ thu·∫≠t h·ªó tr·ª£ c√†i ƒë·∫∑t
                    1-1 qua Ultraviewer.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                H·ªá th·ªëng c√≥ m·∫•t ph√≠ duy tr√¨ h√†ng th√°ng kh√¥ng?
                <i data-lucide="chevron-down"></i>
            </button>
            <div class="faq-answer">
                <p>Kh√¥ng! H·ªá th·ªëng ch·∫°y ho√†n to√†n tr√™n Google Sheet v√† Google Apps Script mi·ªÖn ph√≠ c·ªßa Google. B·∫°n ch·ªâ
                    t·ªën ti·ªÅn mua Source Code 1 l·∫ßn duy nh·∫•t.</p>
            </div>
        </div>

        <div class="faq-item">
            <button class="faq-question" onclick="toggleFaq(this)">
                Gi·ªõi h·∫°n bao nhi√™u h·ªçc vi√™n?
                <i data-lucide="chevron-down"></i>
            </button>
            <div class="faq-answer">
                <p>Google Sheet ch·ª©a ƒë∆∞·ª£c 5 tri·ªáu d√≤ng. V·ªõi nhu c·∫ßu d∆∞·ªõi 10.000 h·ªçc vi√™n th√¨ h·ªá th·ªëng ch·∫°y c·ª±c m∆∞·ª£t m√†
                    kh√¥ng lo ƒë·∫ßy b·ªô nh·ªõ.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer style="border-top:1px solid var(--border); padding:40px 0; margin-top:auto">
        <div class="container" style="text-align:center">
            <p style="color:var(--text-sub)">¬© 2026 LMS Ultimate System. Developed by <strong>GiapDean</strong>.</p>
        </div>
    </footer>

    <!-- PAYMENT MODAL -->
    <div id="payment-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePaymentModal()">&times;</span>
            <div style="text-align: center; margin-bottom: 24px;">
                <h2 style="margin: 0; color: white;">Thanh To√°n</h2>
                <p style="color: var(--text-sub); margin-top: 8px;" id="pkg-name-display">Th√¥ng tin ƒë∆°n h√†ng</p>
            </div>

            <div id="step-1">
                <form id="payment-form" onsubmit="handleFormSubmit(event)">
                    <input type="hidden" id="pkg-input" name="package">
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; color: var(--text-sub); margin-bottom: 8px; font-size: 14px;">H·ªç
                            v√†
                            t√™n</label>
                        <input type="text" name="name" required
                            style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border); background: #000; color: white;">
                    </div>
                    <div style="margin-bottom: 16px;">
                        <label
                            style="display: block; color: var(--text-sub); margin-bottom: 8px; font-size: 14px;">Email</label>
                        <input type="email" name="email" required
                            style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border); background: #000; color: white;">
                    </div>
                    <div style="margin-bottom: 24px;">
                        <label style="display: block; color: var(--text-sub); margin-bottom: 8px; font-size: 14px;">S·ªë
                            ƒëi·ªán tho·∫°i</label>
                        <input type="tel" name="phone" required
                            style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border); background: #000; color: white;">
                    </div>

                    <!-- Discount Code Section -->
                    <div style="margin-bottom: 24px;">
                        <label style="display: block; color: var(--text-sub); margin-bottom: 8px; font-size: 14px;">M√£
                            Gi·∫£m Gi√°</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="discount-code" name="discountCode" placeholder="Nh·∫≠p m√£..."
                                style="flex: 1; padding: 12px; border-radius: 8px; border: 1px solid var(--border); background: #000; color: white;">
                            <button type="button" onclick="applyDiscount()" class="btn btn-glass"
                                style="padding: 0 20px; font-size: 14px;">√Åp D·ª•ng</button>
                        </div>
                        <p id="discount-msg" style="font-size: 12px; margin-top: 8px; min-height: 18px;"></p>
                    </div>

                    <button type="submit" id="btn-submit" class="btn btn-primary" style="width: 100%;">Ti·∫øp t·ª•c thanh
                        to√°n</button>
                    <p style="color: var(--text-sub); font-size: 12px; text-align: center; margin-top: 12px;">Th√¥ng tin
                        c·ªßa b·∫°n ƒë∆∞·ª£c b·∫£o m·∫≠t tuy·ªát ƒë·ªëi.</p>
                </form>
            </div>

            <!-- Step 2: QR Code Scan -->
            <div id="step-2" style="display: none; text-align: center;">
                <h3 class="section-title" style="font-size: 24px; margin-bottom: 10px;">Qu√©t M√£ QR</h3>
                <p class="section-sub" style="margin-bottom: 20px;">Vui l√≤ng m·ªü App Ng√¢n h√†ng ƒë·ªÉ thanh to√°n</p>

                <div style="background: white; padding: 16px; border-radius: 12px; display: inline-block;">
                    <img id="qr-image" src="" alt="QR Code" style="width: 250px; height: 250px; display: block;">
                </div>

                <div style="margin-top: 24px;">
                    <p style="color: var(--text-sub); margin-bottom: 8px;">S·ªë ti·ªÅn c·∫ßn thanh to√°n:</p>
                    <h2 class="text-accent" id="amount-display" style="margin: 0; font-size: 32px;">0ƒë</h2>
                </div>

                <div style="margin-top: 32px; padding: 16px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                    <p
                        style="margin: 0; color: white; display:flex; align-items:center; justify-content:center; gap:8px">
                        <i data-lucide="loader" class="spin"></i> ƒêang ch·ªù x√°c nh·∫≠n thanh to√°n...
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- MINIGAME MODAL -->
    <div id="game-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" onclick="closeGameModal()">&times;</span>
            <div style="text-align: center; margin-bottom: 24px;">
                <h2 style="margin: 0; color: #F59E0B; text-transform: uppercase; letter-spacing: 1px;">SƒÉn M√£ Gi·∫£m Gi√°
                    76.7%</h2>
                <p style="color: var(--text-sub); margin-top: 8px;">D√†nh ri√™ng cho kh√°ch h√†ng chia s·∫ª lan t·ªèa gi√° tr·ªã
                </p>
            </div>

            <div id="game-step-1">
                <div
                    style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; margin-bottom: 24px; text-align: left;">
                    <p style="color: white; margin-bottom: 15px; font-weight: bold;">üìù Th·ªÉ l·ªá:</p>
                    <ol style="color: var(--text-sub); margin: 0; padding-left: 20px; line-height: 1.6;">
                        <li>Share b√†i vi·∫øt n√†y ·ªü ch·∫ø ƒë·ªô <strong>C√¥ng Khai (Public)</strong> tr√™n Facebook c√° nh√¢n.</li>
                        <li><a href="https://www.facebook.com/photo/?fbid=2850555515281923&set=a.349237088747124"
                                target="_blank" style="color: #3b82f6; text-decoration: underline;">Link b√†i vi·∫øt c·∫ßn
                                Share (B·∫•m v√†o
                                ƒë√¢y)</a></li>
                        <li>Copy link b√†i vi·∫øt <strong>b·∫°n v·ª´a share</strong> v√† d√°n v√†o √¥ b√™n d∆∞·ªõi.</li>
                        <li>H·ªá th·ªëng ki·ªÉm tra t·ª± ƒë·ªông. N·∫øu h·ª£p l·ªá, b·∫°n nh·∫≠n ngay Code gi·∫£m gi√°.</li>
                    </ol>
                </div>

                <div style="margin-bottom: 24px;">
                    <label style="display: block; color: var(--text-sub); margin-bottom: 8px; font-size: 14px;">Link b√†i
                        share c·ªßa b·∫°n:</label>
                    <input type="text" id="share-url" placeholder="https://www.facebook.com/..."
                        style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border); background: #000; color: white;">
                </div>

                <button onclick="submitGame()" id="btn-game-submit" class="btn btn-primary"
                    style="width: 100%; background: linear-gradient(90deg, #F59E0B, #D97706);">
                    Ki·ªÉm Tra & Nh·∫≠n Code
                </button>
            </div>

            <div id="game-step-success" style="display: none; text-align: center; animation: fadeIn 0.5s;">
                <div style="font-size: 50px; margin-bottom: 10px;">üéâ</div>
                <h3 style="color: #10b981; margin-bottom: 10px;">Ch√∫c M·ª´ng!</h3>
                <p style="color: var(--text-sub);">B·∫°n ƒë√£ nh·∫≠n ƒë∆∞·ª£c M√£ Gi·∫£m Gi√° 76.7%</p>

                <div
                    style="background: #10b981; color: white; padding: 15px; border-radius: 8px; font-size: 24px; font-weight: bold; margin: 20px 0; letter-spacing: 2px; border: 2px dashed rgba(255,255,255,0.5);">
                    <span id="voucher-code-display">CODE123</span>
                </div>

                <p style="color: var(--text-sub); font-size: 13px; margin-bottom: 20px;">Copy m√£ n√†y v√† nh·∫≠p v√†o b∆∞·ªõc
                    Thanh To√°n nh√©!</p>

                <button onclick="useVoucherNow()" class="btn btn-primary" style="width: 100%;">D√πng Lu√¥n</button>
            </div>
        </div>
    </div>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox(event)">
        <div class="lightbox-content">
            <span class="close-btn" onclick="closeLightbox(event)">&times;</span>
            <img id="lightbox-img" class="lightbox-img" src="" alt="">
            <p id="lightbox-desc" class="gallery-desc" style="color:white; font-size:16px; margin-top:16px"></p>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // --- SCROLL REVEAL LOGIC ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.scroll-reveal').forEach(el => observer.observe(el));

        // --- FAQ LOGIC ---
        function toggleFaq(btn) {
            const item = btn.parentElement;
            const isActive = item.classList.contains('active');

            // Close all
            document.querySelectorAll('.faq-item').forEach(el => el.classList.remove('active'));

            // Toggle current
            if (!isActive) {
                item.classList.add('active');
            }
        }

        // --- COUNTDOWN TIMER LOGIC ---
        function startCountdown() {
            // Set end date to March 1st, 2026
            const endDate = new Date('2026-03-01T00:00:00');

            setInterval(() => {
                const now = new Date().getTime();
                const distance = endDate - now;

                if (distance < 0) {
                    document.getElementById("days").innerText = "00";
                    document.getElementById("hours").innerText = "00";
                    document.getElementById("minutes").innerText = "00";
                    document.getElementById("seconds").innerText = "00";
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("days").innerText = days < 10 ? "0" + days : days;
                document.getElementById("hours").innerText = hours < 10 ? "0" + hours : hours;
                document.getElementById("minutes").innerText = minutes < 10 ? "0" + minutes : minutes;
                document.getElementById("seconds").innerText = seconds < 10 ? "0" + seconds : seconds;
            }, 1000);
        }
        startCountdown();

        // --- TABS LOGIC ---
        function openTab(evt, tabName) {
            var i, tabContent, tabBtns;
            tabContent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabContent.length; i++) {
                tabContent[i].style.display = "none";
                tabContent[i].classList.remove("active");
            }
            tabBtns = document.getElementsByClassName("tab-btn");
            for (i = 0; i < tabBtns.length; i++) {
                tabBtns[i].className = tabBtns[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "grid";
            // Small delay to allow display:block to apply before adding class for animation
            setTimeout(() => {
                document.getElementById(tabName).classList.add("active");
            }, 10);
            evt.currentTarget.className += " active";
        }

        // --- PAYMENT MODAL LOGIC ---

        // ‚ö†Ô∏è QUAN TR·ªåNG: Thay URL b√™n d∆∞·ªõi b·∫±ng Link Web App c·ªßa b·∫°n sau khi deploy code1.gs
        const GAS_API_URL = "https://script.google.com/macros/s/AKfycbwRR__iP1HTafEqhIkbwMiqfEa6n9OzVle7daSiw_SoYLauXBWSk7PalFFZiz7xDNggJw/exec";

        function openPaymentModal(packageType) {
            const modal = document.getElementById('payment-modal');
            const pkgInput = document.getElementById('pkg-input');
            const pkgName = document.getElementById('pkg-name-display');

            // Reset discount
            document.getElementById('discount-code').value = '';
            document.getElementById('discount-msg').innerText = '';

            // Set gi√° tr·ªã g√≥i & Hi·ªÉn th·ªã gi√° g·ªëc
            pkgInput.value = packageType;
            if (packageType === 'basic') {
                pkgName.innerHTML = 'G√≥i Source Code<br><span id="pkg-price-display" style="color:white; font-size:18px; font-weight:bold">2.150.000ƒë</span>';
            } else {
                pkgName.innerHTML = 'Full Combo VIP<br><span id="pkg-price-display" style="color:var(--accent); font-size:18px; font-weight:bold">3.000.000ƒë</span>';
            }

            modal.style.display = 'flex';
        }

        function closePaymentModal() {
            document.getElementById('payment-modal').style.display = 'none';
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            const btn = document.getElementById('btn-submit');
            btn.innerHTML = '<i data-lucide="loader" class="spin"></i> ƒêang x·ª≠ l√Ω...';
            btn.disabled = true;
            lucide.createIcons();

            const formData = new FormData(e.target);
            const data = {};
            formData.forEach((value, key) => data[key] = value);
            data.action = 'create_order'; // Action cho backend

            // G·ªçi API GAS
            fetch(GAS_API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'text/plain;charset=utf-8', // Tr√°nh CORS Preflight
                },
                body: JSON.stringify(data)
            })
                .then(response => response.json())
                .then(res => {
                    if (res.success) {
                        showQRCode(res);
                    } else {
                        alert('L·ªói: ' + res.message);
                        btn.innerHTML = 'Ti·∫øp t·ª•c thanh to√°n';
                        btn.disabled = false;
                    }
                })
                .catch(err => {
                    alert('L·ªói k·∫øt n·ªëi server: ' + err);
                    btn.innerHTML = 'Ti·∫øp t·ª•c thanh to√°n';
                    btn.disabled = false;
                });
        }

        let paymentInterval;

        function showQRCode(data) {
            document.getElementById('step-1').style.display = 'none';
            document.getElementById('step-2').style.display = 'block';

            document.getElementById('qr-image').src = data.qrUrl;
            document.getElementById('amount-display').innerText = new Intl.NumberFormat('vi-VN').format(data.amount) + 'ƒë';

            // Polling ki·ªÉm tra tr·∫°ng th√°i thanh to√°n
            paymentInterval = setInterval(() => {
                checkPaymentStatus(data.transactionCode);
            }, 3000); // Check m·ªói 3s
        }

        function checkPaymentStatus(code) {
            fetch(GAS_API_URL + `?action=check_status&code=${code}`)
                .then(res => res.json())
                .then(data => {
                    if (data.status === 'paid') {
                        clearInterval(paymentInterval);
                        alert('Thanh to√°n th√†nh c√¥ng! V√© tham d·ª± ƒë√£ ƒë∆∞·ª£c g·ª≠i qua Email.');
                        closePaymentModal();
                        window.location.reload();
                    }
                });
        }

        // --- LIGHTBOX LOGIC ---
        function openLightbox(imgSrc, desc) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxDesc = document.getElementById('lightbox-desc');

            lightboxImg.src = imgSrc;
            lightboxDesc.innerText = desc || '';
            lightbox.style.display = 'flex';
            setTimeout(() => lightbox.classList.add('active'), 10);
        }

        function closeLightbox(event) {
            if (event.target.id === 'lightbox' || event.target.classList.contains('close-btn')) {
                const lightbox = document.getElementById('lightbox');
                lightbox.classList.remove('active');
                setTimeout(() => lightbox.style.display = 'none', 300);
            }
        }

        // Close modal on click outside
        window.onclick = function (event) {
            if (event.target == document.getElementById('payment-modal')) {
                closePaymentModal();
            }
        }

        // Escape key to close lightbox/modal
        document.addEventListener('keydown', function (event) {
            if (event.key === "Escape") {
                const lightbox = document.getElementById('lightbox');
                if (lightbox.style.display === 'flex') {
                    lightbox.classList.remove('active');
                    setTimeout(() => lightbox.style.display = 'none', 300);
                }
                closePaymentModal();
            }
        });

        // --- GAME LOGIC ---
        function openGameModal() {
            document.getElementById('game-modal').style.display = 'flex';
        }

        function closeGameModal() {
            document.getElementById('game-modal').style.display = 'none';
        }

        function submitGame() {
            const url = document.getElementById('share-url').value;
            if (!url) {
                alert('Vui l√≤ng nh·∫≠p link b√†i vi·∫øt!');
                return;
            }

            const btn = document.getElementById('btn-game-submit');
            btn.innerHTML = '<i data-lucide="loader" class="spin"></i> ƒêang ki·ªÉm tra...';
            btn.disabled = true;
            lucide.createIcons();

            // Call API
            fetch(GAS_API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                body: JSON.stringify({ action: 'play_game', url: url })
            })
                .then(res => res.json())
                .then(data => {
                    btn.innerHTML = 'Ki·ªÉm Tra & Nh·∫≠n Code';
                    btn.disabled = false;

                    if (data.success) {
                        document.getElementById('game-step-1').style.display = 'none';
                        document.getElementById('game-step-success').style.display = 'block';
                        document.getElementById('voucher-code-display').innerText = data.code;
                    } else {
                        alert('L·ªói: ' + data.message);
                    }
                })
                .catch(err => {
                    alert('L·ªói k·∫øt n·ªëi: ' + err);
                    btn.disabled = false;
                    btn.innerHTML = 'Ki·ªÉm Tra & Nh·∫≠n Code';
                });
        }

        function useVoucherNow() {
            const code = document.getElementById('voucher-code-display').innerText;
            closeGameModal();
            // M·∫∑c ƒë·ªãnh m·ªü g√≥i VIP khi user d√πng code xong (upsell)
            openPaymentModal('vip');
            // Auto fill discount
            document.getElementById('discount-code').value = code;
            applyDiscount();
        }

        function applyDiscount() {
            const code = document.getElementById('discount-code').value;
            const msg = document.getElementById('discount-msg');
            const pkgInput = document.getElementById('pkg-input').value;

            if (!code) {
                msg.innerText = '';
                return;
            }

            msg.innerText = 'ƒêang ki·ªÉm tra...';
            msg.style.color = '#text-sub';

            fetch(GAS_API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                body: JSON.stringify({ action: 'check_discount', code: code })
            })
                .then(res => res.json())
                .then(data => {
                    if (data.success) {
                        msg.innerText = data.message;
                        msg.style.color = '#10b981';

                        // Update Price Display
                        let newPrice = '';
                        if (pkgInput === 'basic') newPrice = '499.000ƒë';
                        else newPrice = '699.000ƒë';

                        let oldPrice = '';
                        if (pkgInput === 'basic') oldPrice = '2.150.000ƒë';
                        else oldPrice = '3.000.000ƒë';

                        document.getElementById('pkg-price-display').innerHTML =
                            `<span style="text-decoration:line-through; color:#666; font-size:14px; margin-right:5px">${oldPrice}</span> ${newPrice}`;
                    } else {
                        msg.innerText = data.message;
                        msg.style.color = '#ea580c';
                    }
                })
                .catch(err => msg.innerText = 'L·ªói ki·ªÉm tra.');
        }

    </script>
</body>

</html>
